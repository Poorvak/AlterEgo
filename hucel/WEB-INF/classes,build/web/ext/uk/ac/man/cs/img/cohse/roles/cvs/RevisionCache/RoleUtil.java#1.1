/*
 * RoleUtil.java
 *
 * Created on August 4, 2006, 12:33 PM
 *
 * To change this template, choose Tools | Template Manager
 * and open the template in the editor.
 */

package uk.ac.man.cs.img.cohse.roles;

import java.util.Enumeration;
import java.util.HashSet;
import java.util.ArrayList;
import java.util.List;
import java.util.Iterator;

//This is the Liferay class to acces the users role
import com.liferay.portal.service.spring.RoleServiceUtil;
import com.liferay.portal.model.Role;
/**
 *
 * @author Yeliz Yesilada
 */
public class RoleUtil extends RoleServiceUtil {
    
    /** Creates a new instance of RoleUtil */
    public RoleUtil() {
    }
    
    public static boolean isUserInRole(String userId, String roleName){
        boolean result = false;
        if(userId == null){
            return false;
        }
        else{
            java.util.List roles = null;
            try{
                roles = RoleServiceUtil.getUserRoles(userId);
            } catch(Exception e){
                System.err.println("Cannot get the user roles");
                return false;
            }
            if(roles != null){
                Iterator it = roles.iterator();
                com.liferay.portal.model.Role role = null;
                String nRole = null;
                while (it.hasNext()) {
                    role = (com.liferay.portal.model.Role) it.next();
                    if(role != null){
                        nRole = role.getName();
                        if(nRole.equals(roleName)){
                            result = true;
                        }
                    }//if
                }//while
            }//if 
            return result;
        }//else        
    }//isUserInRole
}
